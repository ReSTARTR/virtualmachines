# Kickstart file automatically generated by anaconda.
# root pw = "rootpass"

install
cdrom
lang en_US.UTF-8
keyboard us
network --device eth0 --bootproto dhcp --noipv6
rootpw --iscrypted $6$iUp8.d.ALXwem3kp$CG8O5CrpD0IRst4pWLi7AdLak4Nnc4s.QWFHFzHr6xuQJ2AGUgOaJ13BjmIXdqGAQkLsDxhjMa11KFM/4GZKS1
firewall --disabled
authconfig --enableshadow --passalgo=sha512
selinux --disabled
timezone Asia/Tokyo
bootloader --location=mbr

text
skipx
zerombr

clearpart --all --initlabel
autopart

auth --usershadow --enablemd5
firstboot --disabled
reboot

# パッケージ 以下の様なルールで書く
%packages
@development

%post --log=/root/install-post.log
/usr/bin/yum -y install openssh-server sudo git
/etc/init.d/sshd start
/usr/sbin/groupadd vagrant
/usr/sbin/useradd vagrant -g vagrant -G wheel
echo "vagrant"|passwd --stdin vagrant
echo "vagrant ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers.d/vagrant
chmod 0440 /etc/sudoers.d/vagrant
/usr/bin/yum -y install git tmux readline-devel ncourses-devel tcl-devel openssl-devel libcurl-devel libmemcached-devel libxml2-devel libxslt-devel curl-devel cyrus-sasl-devel ImageMagick-devel sqlite-devel mysql-devel
wget http://ftp.jaist.ac.jp/pub/Linux/Fedora/epel/6/x86_64/epel-release-6-8.noarch.rpm
rpm -ihv --replacefiles epel-release-6-8.noarch.rpm
/usr/bin/yum -y install --enablerepo=epel libyaml-devel
export RBENV_ROOT=/usr/local/rbenv
git clone https://github.com/sstephenson/rbenv.git ${RBENV_ROOT}
git clone https://github.com/sstephenson/ruby-build.git ${RBENV_ROOT}/plugins/ruby-build
${RBENV_ROOT}/plugins/ruby-build/install.sh
RUBY_CONFIGURE_OPTS="--disable-install-rdoc --disable-install-doc" ${RBENV_ROOT}/bin/rbenv install 2.0.0-p451
RUBY_CONFIGURE_OPTS="--disable-install-doc" ${RBENV_ROOT}/bin/rbenv install 1.9.2-p326
PREFIX=/usr/local ${RBENV_ROOT}/plugins/ruby-build/ruby-build 2.0.0-p451 2.0.0-p451

%end
